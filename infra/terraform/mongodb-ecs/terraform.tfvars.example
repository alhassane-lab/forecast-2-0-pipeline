aws_region  = "eu-west-1"
project_name = "forecast"
environment  = "prod"

vpc_id = "vpc-xxxxxxxx"
public_subnet_id = "subnet-public-nat"
private_subnet_ids = [
  "subnet-aaaaaaaa",
  "subnet-bbbbbbbb",
  "subnet-cccccccc"
]

namespace_name             = "mongo.internal"
mongo_image                = "123456789012.dkr.ecr.eu-west-1.amazonaws.com/forecast-mongodb-rs:6.0-rs"
replica_set_name           = "rs0"
root_username              = "admin"

# allow only app SG(s) and optional bastion CIDR(s)
allowed_security_group_ids = ["sg-xxxxxxxx"]
allowed_cidr_blocks        = []

task_cpu       = 1024
task_memory    = 2048
ebs_size_gb    = 50
ebs_volume_type = "gp3"
ebs_iops       = 3000
ebs_throughput = 125

# Optional KMS key ARN. Keep null to use AWS managed EBS key.
kms_key_id = null

mongod_extra_args = ""

enable_backups                    = true
backup_schedule                   = "cron(0 3 ? * * *)"
backup_start_window_minutes       = 60
backup_completion_window_minutes  = 180
backup_cold_storage_after_days    = 30
backup_delete_after_days          = 180

enable_monitoring                 = true
alarm_notification_emails         = ["oncall@example.com"]
ecs_running_task_minimum          = 1
ecs_cpu_high_threshold            = 85
ecs_memory_high_threshold         = 85
mongodb_error_log_alarm_threshold = 5

tags = {
  Owner = "data-engineering"
}
